<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>X Bookmark Analyzer</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="header-icon">
        📊
      </div>
      <h1>X Bookmark Analyzer</h1>
      <button id="settingsBtn" class="settings-btn" title="Settings">
        ⚙️
      </button>
    </div>

    <!-- Status Bar -->
    <div id="statusBar" class="status-bar hidden">
      <div class="status-content">
        <span id="statusText">Ready</span>
        <div id="statusSpinner" class="spinner hidden"></div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="content">
      <!-- Page Detection -->
      <div id="pageInfo" class="page-info">
        <div class="page-status">
          <span id="pageIndicator" class="indicator">🔍</span>
          <span id="pageText">Detecting page...</span>
        </div>
        <button id="refreshBtn" class="refresh-btn">🔄 Refresh</button>
      </div>

      <!-- Scan Section -->
      <div class="section">
        <div class="section-header">
          <h2>📱 Scan Bookmarks</h2>
          <button id="scanBtn" class="primary-btn" disabled>
            Scan Current Page
          </button>
        </div>
        <div id="scanResults" class="scan-results hidden">
          <p>Found <span id="urlCount">0</span> bookmark URLs</p>
        </div>
      </div>

      <!-- URLs Section -->
      <div class="section">
        <div class="section-header">
          <h2>🔗 Bookmark URLs</h2>
          <div class="url-actions">
            <button id="pasteBtn" class="secondary-btn">📋 Paste</button>
            <button id="clearBtn" class="secondary-btn">🗑️ Clear</button>
          </div>
        </div>
        <div class="url-container">
          <textarea 
            id="urlInput" 
            placeholder="URLs will appear here after scanning, or paste your bookmark URLs (one per line)"
            rows="6"
          ></textarea>
        </div>
      </div>

      <!-- Analysis Section -->
      <div class="section">
        <div class="section-header">
          <h2>🤖 AI Analysis</h2>
          <button id="analyzeBtn" class="primary-btn" disabled>
            Analyze Bookmarks
          </button>
        </div>
        
        <!-- Progress Bar -->
        <div id="progressSection" class="progress-section hidden">
          <div class="progress-bar">
            <div id="progressFill" class="progress-fill"></div>
          </div>
          <div class="progress-text">
            <span id="progressText">Analyzing...</span>
            <span id="progressPercent">0%</span>
          </div>
        </div>

        <!-- Results -->
        <div id="resultsSection" class="results-section hidden">
          <div class="results-header">
            <h3>📋 Results (<span id="resultsCount">0</span>)</h3>
            <button id="exportBtn" class="export-btn">📥 Export MD</button>
          </div>
          <div id="resultsList" class="results-list"></div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <button id="optionsBtn" class="action-btn">
          ⚙️ Settings
        </button>
        <button id="helpBtn" class="action-btn">
          ❓ Help
        </button>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <p>Transform your X bookmarks into organized knowledge</p>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="loading-overlay hidden">
    <div class="loading-content">
      <div class="spinner large"></div>
      <p>Processing your bookmarks...</p>
    </div>
  </div>

  <!-- Error Modal -->
  <div id="errorModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>⚠️ Error</h3>
        <button id="closeError" class="close-btn">✖️</button>
      </div>
      <div class="modal-body">
        <p id="errorMessage"></p>
      </div>
      <div class="modal-footer">
        <button id="errorOk" class="primary-btn">OK</button>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>